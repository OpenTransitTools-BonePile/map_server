services:
  wms:
  demo:

layers:
   - name: metro_state_aerials
     title: OR Aerial Tiles
     sources: [or_aerial_cache]

caches:
  or_aerial_cache:
    grids: [webmercator]
    #sources: [base_tile, or_tile_source]
    sources: [base_tile]

    # WMS tiles you can't do have -- meta tiling
    # https://mapproxy.org/docs/nightly/labeling.html
    meta_size: [1, 1]
    meta_buffer: 0

sources:
  base_tile:
    type: tile
    grid: webmercator_hq
    url: 'http://a.tile.stamen.com/toner-lite/%(z)s/%(x)s/%(y)s%%402x.png'
    scale_factor: 2
    on_error:
      other:
        response: transparent
        cache: True

  or_tile_source:
    coverage:
      bbox: [-124.633489, 41.932309, -116.428692, 46.317422]
      srs: EPSG:4326
    req:
      layers: '0'
      transparent: true
      url: http://imagery.oregonexplorer.info:80/arcgis/services/NAIP_2016/NAIP_2016_WM/ImageServer/WMSServer
    supported_srs: ['EPSG:3857', 'EPSG:4326']
    type: wms

grids:
  webmercator:
    base: GLOBAL_WEBMERCATOR
    tile_size: [256, 256]

  webmercator_hq:
    srs: "EPSG:3857"
    origin: nw
    min_res: 78271.51696402048
    tile_size: [512, 512]

  coverage:
    bbox: [-124.633489, 41.932309, -116.428692, 46.317422]
    bbox_srs: 'EPSG:4326'

